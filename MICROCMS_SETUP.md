# microCMS 設定手順書

## 📋 作業チェックリスト

### 1. microCMS アカウント・プロジェクトの準備

-   [ ] [microCMS](https://microcms.io/) でアカウント作成
-   [ ] 新しいサービス（プロジェクト）を作成
-   [ ] サービス ID をメモ（例: `my-company-site`）

### 2. API の作成

#### 2-1. カテゴリ API の作成

1. microCMS ダッシュボードで「API を作成」をクリック
2. 以下の設定を入力：

    - **API 名**: カテゴリ
    - **エンドポイント**: `categories`
    - **API の型**: リスト形式

3. フィールドを追加：

    ```
    フィールド ID: name
    表示名: カテゴリ名
    種類: テキストフィールド
    必須: ON
    ```

    ```
    フィールド ID: slug
    表示名: スラッグ
    種類: テキストフィールド
    必須: ON
    ```

4. サンプルデータを作成：
    - 会社情報（slug: company）
    - 技術情報（slug: tech）
    - お知らせ（slug: notice）

#### 2-2. ニュース API の作成

1. 「API を作成」をクリック
2. 以下の設定を入力：

    - **API 名**: ニュース
    - **エンドポイント**: `news`
    - **API の型**: リスト形式

3. フィールドを追加：

    ```
    フィールド ID: title
    表示名: タイトル
    種類: テキストフィールド
    必須: ON
    ```

    ```
    フィールド ID: content
    表示名: 本文
    種類: リッチエディタ
    必須: ON
    ```

    ```
    フィールド ID: category
    表示名: カテゴリ
    種類: コンテンツ参照
    参照先: categories（カテゴリ API）
    必須: OFF
    ```

    ```
    フィールド ID: thumbnail
    表示名: サムネイル画像
    種類: 画像
    必須: OFF
    ```

    ```
    フィールド ID: excerpt
    表示名: 要約
    種類: テキストエリア
    必須: OFF
    ```

    ```
    フィールド ID: tags
    表示名: タグ
    種類: 複数テキスト
    必須: OFF
    ```

### 3. 環境変数の設定

#### 3-1. API キーの取得

1. microCMS ダッシュボードで「API キー」メニューをクリック
2. 「GET」の X-MICROCMS-API-KEY をコピー

#### 3-2. .env ファイルの編集

プロジェクトルートの `.env` ファイルを編集：

```bash
# microCMS設定
MICROCMS_API_KEY=your-api-key-here
MICROCMS_SERVICE_DOMAIN=your-service-id
```

**実際の値に置き換える例:**

```bash
# microCMS設定
MICROCMS_API_KEY=abcd1234-efgh-5678-ijkl-9012mnopqrst
MICROCMS_SERVICE_DOMAIN=my-company-site
```

### 4. サンプルデータの作成

#### カテゴリデータ

以下のカテゴリを作成してください：

1. **会社情報**

    - カテゴリ名: 会社情報
    - スラッグ: company

2. **技術情報**

    - カテゴリ名: 技術情報
    - スラッグ: tech

3. **お知らせ**
    - カテゴリ名: お知らせ
    - スラッグ: notice

#### ニュース記事データ

以下のニュース記事を作成してください：

1. **株式会社サンプル設立のお知らせ**

    - タイトル: 株式会社サンプル設立のお知らせ
    - カテゴリ: 会社情報
    - 本文: この度、AI を活用したソフトウェア開発支援を事業内容とする株式会社サンプルを設立いたしました。お客様のビジネス成長をサポートしてまいります。
    - 要約: 株式会社サンプルを設立いたしました。
    - タグ: 設立, 会社情報

2. **新しい AI 開発ツールの導入について**
    - タイトル: 新しい AI 開発ツールの導入について
    - カテゴリ: 技術情報
    - 本文: 最新の AI 技術を活用した開発ツールを導入し、より効率的で高品質なソフトウェア開発を実現いたします。
    - 要約: 最新の AI 開発ツールを導入しました。
    - タグ: AI, 開発ツール, 技術

### 5. 動作確認

#### 5-1. 開発サーバーの起動

```bash
# プロジェクトディレクトリで実行
pnpm run dev
```

#### 5-2. 確認すべきポイント

-   [ ] http://localhost:3000/news でニュース一覧が表示される
-   [ ] microCMS から取得したデータが正しく表示される
-   [ ] 個別記事リンクが正しく動作する
-   [ ] カテゴリが正しく表示される
-   [ ] ローディング表示が動作する
-   [ ] エラーハンドリングが動作する

#### 5-3. トラブルシューティング

**「ニュースの取得に失敗しました」エラーが出る場合:**

1. `.env` ファイルの API キーとサービス ID を再確認
2. microCMS でニュース記事が公開されているか確認
3. ブラウザの開発者ツールでネットワークエラーを確認

**ローディングが終わらない場合:**

1. microCMS の API エンドポイントが正しく設定されているか確認
2. ブラウザの開発者ツールでコンソールエラーを確認

### 6. 本番デプロイ時の注意点

#### 6-1. 環境変数の設定

-   Vercel: Settings → Environment Variables で設定
-   Netlify: Site settings → Build & Deployment → Environment variables で設定

#### 6-2. ドメイン設定

-   microCMS の CORS 設定で本番ドメインを許可
-   構造化データの URL を本番ドメインに変更

## 🎉 完了！

すべての設定が完了すると、以下の機能が利用できます：

-   ✅ microCMS での簡単なニュース管理
-   ✅ リアルタイムでのニュース更新
-   ✅ SEO 最適化された記事ページ
-   ✅ レスポンシブ対応
-   ✅ エラーハンドリング
-   ✅ ローディング表示

何か問題がありましたら、上記のトラブルシューティングを参考にしてください！
